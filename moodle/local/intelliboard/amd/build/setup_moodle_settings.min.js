define(["jquery","core/ajax","local_intelliboard/validator","core/str"],function(a,b,c,d){var e={errorsContainer:a(".moodle-settings .warnings-block"),loaderContainer:a(".moodle-settings .loader"),save:function(e){if(c.validateEmail(a("#subscription_email").val())){var f=b.call([{methodname:"local_intelliboard_setup_base_settings",args:{params:{webservice:a("#webservice").is(":checked"),rest_protocol:a("#rest_protocol").is(":checked"),soap_protocol:a("#soap_protocol").is(":checked"),user_identifier:a("#usernameorid").val(),enable_tracking:a("#enable_tracking").is(":checked"),enable_sso_link:a("#enable_sso_link").is(":checked"),email:a("#subscription_email").val()}}}]);f[0].done(function(a){e(a)}),f[0].fail(function(){var b=d.get_string("server_error","local_intelliboard");a.when(b).done(function(a){e({status:"error",data:"<p>"+a+"</p>"})})})}else{var g=d.get_string("invalid_email","local_intelliboard");a.when(g).done(function(a){e({status:"error",data:"<p>"+a+"</p>"})})}},showErrors:function(a){e.errorsContainer.html(a),e.errorsContainer.removeClass("hidden")},hideErrors:function(){e.errorsContainer.html(""),e.errorsContainer.addClass("hidden")},closeTab:function(){a(".moodle-settings").addClass("closed")},openTab:function(){a(".moodle-settings").removeClass("closed")}};return e});