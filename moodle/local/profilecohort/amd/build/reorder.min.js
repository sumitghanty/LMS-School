define ("local_profilecohort/reorder",["jquery"],function(a){"use strict";var h={MOVETO:"select.moveto, .moveto select",FIELDWRAPPER:".localprofile-fieldwrapper",RULENUMBER:".localprofile-number"};function b(){var b=a("#region-main form input.andnextrule");if(b.closest("label").length){b.closest("label").removeClass("hidden").last().addClass("hidden")}else{b.closest("span").removeClass("hidden").last().addClass("hidden")}}function c(){var b=a("#region-main form");b.find(h.FIELDWRAPPER).removeClass("localprofile-flash").each(function(){var b=a(this);if(b.closest(".localprofile-combined").length){b.unwrap()}})}function d(){var c=null,d=a("#region-main form");d.find(h.FIELDWRAPPER).each(function(){var b=a(this),d=b.find("input.andnextrule");if(!d.length){return}if(d.prop("checked")){if(c){c=c.add(b)}else{c=b}}else{if(c){c=c.add(b);c.wrapAll("<div class=\"localprofile-combined\" />");c=null}}});if(c){c.wrapAll("<div class=\"localprofile-combined\" />");c=null}b()}function e(){c();d()}function f(b){var e=a(b.currentTarget),f=parseInt(e.data("lastPosition"),10),g=parseInt(e.val(),10);if(f===g){return}var i=null,j=a(h.MOVETO);j.each(function(){var b=a(this);if(b.attr("id")!==e.attr("id")){if(parseInt(b.val(),10)===g){i=b.closest(h.FIELDWRAPPER);return!1}}return!0});if(!i){return}c();var k=e.closest(h.FIELDWRAPPER);if(g<f){k.insertBefore(i)}else{k.insertAfter(i)}j=a(h.MOVETO);j.each(function(b){var c=a(this),d=b+1;c.data("lastPosition",d);c.val(d);c.closest(h.FIELDWRAPPER).find(h.RULENUMBER).html(d)});k.removeClass("localprofile-flash").addClass("localprofile-flash");d()}function g(){var b=a("#region-main form input.deleterule");b.each(function(){var b=a(this),c=b.closest(".localprofile-fieldwrapper");if(b.prop("checked")){c.addClass("todelete");c.find(":input:not(.deleterule)").prop("disabled",!0)}else{c.removeClass("todelete");c.find(":input").prop("disabled",!1)}})}return{init:function init(){var b=a("#region-main form");b.find(h.MOVETO).each(function(){var b=a(this);b.data("lastPosition",b.val())});b.on("change",h.MOVETO,f);b.on("change","input.andnextrule",e);b.on("change","input.deleterule",g);d()}}});
//# sourceMappingURL=reorder.min.js.map
